"use strict";(self.webpackChunkKeeperNg=self.webpackChunkKeeperNg||[]).push([[559],{2559:(N,h,t)=>{t.r(h),t.d(h,{SignInPageModule:()=>l});var p=t(6895),c=t(9116),M=t(5161),n=t(4650),S=t(7009),v=t(3436),b=t(9653),T=t(6305);class Z{constructor(){this.email="",this.password="",this.rememberMe=!1}}var s=t(4006),f=t(9549),I=t(4144),F=t(4859),C=t(6709);function x(o,e){1&o&&(n.TgZ(0,"mat-error"),n._uU(1,"Please enter a valid email."),n.qZA())}function y(o,e){1&o&&(n.TgZ(0,"mat-error"),n._uU(1,"Please enter a password."),n.qZA())}class d{constructor(){this.signInFormSubmit=new n.vpe,this.redirectRequest=new n.vpe,this.isLoading=!1,this.signInForm=new Z}onSubmit(){this.signInFormSubmit.emit(this.signInForm)}signupRedirect(){this.redirectRequest.emit("/auth/sign-up")}}d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-sign-in-form"]],outputs:{signInFormSubmit:"signInFormSubmit",redirectRequest:"redirectRequest"},decls:20,vars:6,consts:[[1,"d-flex","flex-column",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-row"],[1,"form-group","col-12","p-2"],["matInput","","placeholder","Email address","type","email","name","email","minlength","5","maxlength","256","required","",3,"ngModel","ngModelChange"],["emailField","ngModel"],[4,"ngIf"],["matInput","","placeholder","Password","type","password","name","password","minlength","5","maxlength","50","required","",3,"ngModel","ngModelChange"],["passwordField","ngModel"],["name","rememberMe",1,"mb-2",3,"ngModel","ngModelChange"],["mat-raised-button","","type","submit",3,"disabled"],["mat-flat-button","","type","button",3,"click"]],template:function(e,i){if(1&e&&(n.TgZ(0,"form",0,1),n.NdJ("ngSubmit",function(){return i.onSubmit()}),n.TgZ(2,"div",2)(3,"mat-form-field",3)(4,"input",4,5),n.NdJ("ngModelChange",function(r){return i.signInForm.email=r}),n.qZA(),n.YNc(6,x,2,0,"mat-error",6),n.qZA()(),n.TgZ(7,"div",2)(8,"mat-form-field",3)(9,"input",7,8),n.NdJ("ngModelChange",function(r){return i.signInForm.password=r}),n.qZA(),n.YNc(11,y,2,0,"mat-error",6),n.qZA()(),n.TgZ(12,"div",2)(13,"mat-checkbox",9),n.NdJ("ngModelChange",function(r){return i.signInForm.rememberMe=r}),n._uU(14,"Remember me"),n.qZA()(),n.TgZ(15,"button",10),n._uU(16," Login "),n.qZA(),n._UZ(17,"hr"),n.TgZ(18,"button",11),n.NdJ("click",function(){return i.signupRedirect()}),n._uU(19," Create an account "),n.qZA()()),2&e){const a=n.MAs(1),r=n.MAs(5),R=n.MAs(10);n.xp6(4),n.Q6J("ngModel",i.signInForm.email),n.xp6(2),n.Q6J("ngIf",r.invalid),n.xp6(3),n.Q6J("ngModel",i.signInForm.password),n.xp6(2),n.Q6J("ngIf",R.invalid),n.xp6(2),n.Q6J("ngModel",i.signInForm.rememberMe),n.xp6(2),n.Q6J("disabled",!a.valid)}},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.On,s.F,f.KE,f.TO,I.Nt,F.lW,C.oG],styles:["form[_ngcontent-%COMP%]{border-radius:10px;padding:50px;box-shadow:#21212130 0 10px 15px}"],changeDetection:0});class u{constructor(e,i,a,r){this.snackbar=e,this.authService=i,this.store=a,this.router=r}onSigninSubmit(e){this.authService.authenticateViaCredentials(e).subscribe({next:i=>{i&&(this.store.dispatch((0,M.dV)({user:i})),this.router.navigate(["/client"]))},error:()=>{this.snackbar.open("Invalid email or password","Close",{duration:2e3,panelClass:["error-snackbar"]})}})}onSigninRedirect(e){this.router.navigate([e])}}u.\u0275fac=function(e){return new(e||u)(n.Y36(S.ux),n.Y36(v.e),n.Y36(b.yh),n.Y36(c.F0))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-sign-in-page"]],decls:2,vars:0,consts:[["fadeInContent",""],[1,"form-box",3,"signInFormSubmit","redirectRequest"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"app-sign-in-form",1),n.NdJ("signInFormSubmit",function(r){return i.onSigninSubmit(r)})("redirectRequest",function(r){return i.onSigninRedirect(r)}),n.qZA()())},dependencies:[T.$,d],styles:[".form-box[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-box[_ngcontent-%COMP%]     form{width:100%;max-width:550px}"],changeDetection:0});const J=[{path:"",component:u}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=n.oAB({type:m}),m.\u0275inj=n.cJS({imports:[c.Bz.forChild(J),c.Bz]});var A=t(8912);class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=n.oAB({type:g}),g.\u0275inj=n.cJS({imports:[p.ez,s.u5,f.lN,I.c,F.ot,C.p9]});var P=t(3457);class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[p.ez,c.Bz,A.X,P.p,g,S.ZX,m]})}}]);