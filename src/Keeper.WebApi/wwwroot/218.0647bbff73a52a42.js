"use strict";(self.webpackChunkKeeperNg=self.webpackChunkKeeperNg||[]).push([[218],{6218:(ot,A,i)=>{i.r(A),i.d(A,{ClientRepositoryActivityLogModule:()=>m});var l=i(6895),v=i(9116),b=i(4004),x=i(9300),T=i(3900),N=i(1135),I=i(9841),Y=i(8174),t=i(4650),P=i(3355),R=i(529);class r{constructor(o,n){this.httpClient=o,this.baseUrl=n}getActivityLogPagination(o,n){return this.httpClient.get(this.baseUrl+"/api/repository/activities",{params:{repositoryId:o,page:n}})}}r.\u0275fac=function(o){return new(o||r)(t.LFG(R.eN),t.LFG(P._n))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"});var U=i(9653),$=i(7274),M=i(7009),L=i(9798),y=i(5906),a=i(671),Z=i(7392);function D(e,o){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Operation Name"),t.qZA())}function O(e,o){if(1&e&&(t.TgZ(0,"td",13)(1,"div",14)(2,"mat-icon",15),t._uU(3,"info"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&e){const n=o.$implicit;t.xp6(5),t.Oqu(n.operationName)}}function Q(e,o){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Identity"),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.identity)}}function B(e,o){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Operation context"),t.qZA())}function S(e,o){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.operationContext)}}function _(e,o){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Occurred"),t.qZA())}function z(e,o){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,n.createdDate,"dd/MM/yyyy HH:mm"))}}function F(e,o){1&e&&t._UZ(0,"tr",16)}function H(e,o){1&e&&t._UZ(0,"tr",17)}function j(e,o){if(1&e&&(t.TgZ(0,"table",3),t.ynx(1,4),t.YNc(2,D,2,0,"th",5),t.YNc(3,O,6,1,"td",6),t.BQk(),t.ynx(4,7),t.YNc(5,Q,2,0,"th",5),t.YNc(6,J,2,1,"td",6),t.BQk(),t.ynx(7,8),t.YNc(8,B,2,0,"th",5),t.YNc(9,S,2,1,"td",6),t.BQk(),t.ynx(10,9),t.YNc(11,_,2,0,"th",5),t.YNc(12,z,3,4,"td",6),t.BQk(),t.YNc(13,F,1,0,"tr",10),t.YNc(14,H,1,0,"tr",11),t.qZA()),2&e){const n=t.oxw();t.Q6J("dataSource",n.activities),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}function G(e,o){1&e&&(t.TgZ(0,"div",18)(1,"div",19),t._uU(2,"No activity..."),t.qZA()())}class g{constructor(){this.displayedColumns=[(0,y.$)("operationName"),(0,y.$)("identity"),(0,y.$)("operationContext"),(0,y.$)("createdDate")]}}g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-activity-log-table"]],inputs:{activities:"activities"},decls:3,vars:2,consts:[[1,"h-100"],["mat-table","",3,"dataSource",4,"ngIf"],["class","empty-table",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","operationName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","identity"],["matColumnDef","operationContext"],["matColumnDef","createdDate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"me-1"],["mat-header-row",""],["mat-row",""],[1,"empty-table"],[1,"fs-1","fw-lighter","m-3"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.YNc(1,j,15,3,"table",1),t.YNc(2,G,3,0,"div",2),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",n.activities),t.xp6(1),t.Q6J("ngIf",n.activities&&n.activities.length<=0))},dependencies:[l.O5,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,Z.Hw,l.uU],styles:[".mat-column-operationContext[_ngcontent-%COMP%]{flex:0 0 50%}.mat-column-operationName[_ngcontent-%COMP%], .mat-column-identity[_ngcontent-%COMP%], .mat-column-createdDate[_ngcontent-%COMP%]{flex:0 0 16.6%}"],changeDetection:0});var X=i(6305),w=i(3779);function E(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"mat-paginator",4),t.NdJ("page",function(u){t.CHM(n);const C=t.oxw(2);return t.KtG(C.onPageChanged(u))}),t.qZA(),t._UZ(3,"app-activity-log-table",5),t.qZA(),t.BQk()}if(2&e){const n=o.ngIf;t.xp6(2),t.Q6J("pageSize",n.itemsPerPage)("length",n.totalItems)("pageIndex",n.currentPage-1),t.xp6(1),t.Q6J("activities",n.pageItems)}}function K(e,o){if(1&e&&(t.ynx(0),t.YNc(1,E,4,4,"ng-container",2),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(),f=t.MAs(3);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.activityLogsPagination$))("ngIfElse",f)}}function W(e,o){1&e&&t._UZ(0,"app-loading-centered")}class d{constructor(o,n,f,u,C){this.route=o,this.activityLog=n,this.store=f,this.dialog=u,this.snackbar=C,this.repoId$=this.route.parent.parent.paramMap.pipe((0,b.U)(c=>c.get("repositoryId")),(0,x.h)(c=>null!==c)),this.repository$=this.repoId$.pipe((0,T.w)(c=>this.store.select((0,Y.cc)(c)).pipe((0,x.h)(h=>null!==h)))),this.currentPage$=new N.X(1),this.activityLogsPagination$=(0,I.a)([this.repoId$,this.currentPage$]).pipe((0,T.w)(([c,h])=>this.activityLog.getActivityLogPagination(c,h)))}onPageChanged(o){this.currentPage$.next(o.pageIndex+1)}}d.\u0275fac=function(o){return new(o||d)(t.Y36(v.gz),t.Y36(r),t.Y36(U.yh),t.Y36($.uw),t.Y36(M.ux))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-client-repository-activity-log"]],hostAttrs:[1,"flex-spacer"],decls:4,vars:3,consts:[[4,"ngIf"],["loadingTemplate",""],[4,"ngIf","ngIfElse"],["fadeInContent","",1,"d-flex","flex-column","p-0","h-100"],[3,"pageSize","length","pageIndex","page"],[3,"activities"]],template:function(o,n){1&o&&(t.YNc(0,K,3,4,"ng-container",0),t.ALo(1,"async"),t.YNc(2,W,1,0,"ng-template",null,1,t.W1O)),2&o&&t.Q6J("ngIf",t.lcZ(1,1,n.repository$))},dependencies:[l.O5,L.NW,g,X.$,w.L,l.Ov],styles:["mat-paginator[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#f9f9f9;margin:10px;border-radius:10px}"]});const V=[{path:"",component:d}];class p{}p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[v.Bz.forChild(V),v.Bz]});var q=i(4859);class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[l.ez,a.p0,Z.Ps,q.ot]});var k=i(5836),tt=i(3457),et=i(4850);class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[l.ez,L.TU,s,tt.p,et.t,k.J,p]})}}]);