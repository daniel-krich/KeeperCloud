<ng-container *ngIf="repository$ | async as repository; else placeHolderTemplate">
    <ng-container *ngIf="repositoryFileState$ | async as repositoryFileState; else placeHolderTemplate">
        <div class="d-flex flex-column p-0 h-100" fadeInContent
            *ngIf="repositoryFileState.files != null; else placeHolderTemplate">
            <app-repository-info [repository]="repository" (repositoryEditOpen)="onRepoEditOpen(repository)"
                (repositoryRemove)="onRepoRemove(repository)"></app-repository-info>

            <app-search-file-input (searchSubmit)="onSearchSubmit($event)" #searchFileInput></app-search-file-input>

            <app-file-upload-input class="d-block h-100" (filesChange)="onFilesChangeUpload($event, repository.id)">
                <app-table-file-display class="d-block h-100" [files]="(repositoryFiles$ | async)!"
                    (filesDownload)="onDownloadFiles($event, repository.id)"
                    (filesDelete)="onDeleteFiles($event, repository.id)"></app-table-file-display>
            </app-file-upload-input>

            <ng-container *ngIf="repoFileBatchInfo$ | async as repoFileBatchInfo">
                <div *ngIf="repoFileBatchInfo.canLoadMore" class="d-flex justify-content-center bg-white">
                    <button mat-button class="mt-3 mb-3" color="primary" (click)="onLoadMoreFiles(repository.id)">
                        Load more ({{repoFileBatchInfo.HowMuchLeft}})
                    </button>
                </div>
            </ng-container>
        </div>
    </ng-container>
</ng-container>

<ng-template #placeHolderTemplate>
    <div class="d-flex flex-column p-0 h-100">
        <div class="card rounded-0 p-4">
            <ngx-skeleton-loader count="1"
                [theme]="{ 'display': 'block', 'margin-bottom': '50px', 'width': '20%', 'height': '10px'  }"
                appearance="line"></ngx-skeleton-loader>
            <ngx-skeleton-loader count="2"
                [theme]="{ 'display': 'block', 'margin-bottom': '20px', 'width': '70%', 'height': '10px'  }"
                appearance="line"></ngx-skeleton-loader>
        </div>
        <div class="card rounded-0 p-4">
            <ngx-skeleton-loader count="1" appearance="line"></ngx-skeleton-loader>
        </div>
        <div class="card rounded-0 p-4">
            <ngx-skeleton-loader count="13" [theme]="{ 'margin-bottom': '20px' }"
                appearance="line"></ngx-skeleton-loader>
        </div>
    </div>
</ng-template>